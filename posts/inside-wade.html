<!doctype html><html><head><meta charset='utf-8'><meta http-equiv='X-UA-Compatible' content='IE=edge'><meta name='viewport' content='width=device-width,initial-scale=1'><meta name='description' content="Inside Wade | Kabir Shah's blog."><meta name='author' content='Kabir Shah'><title>Inside Wade | Kabir Shah</title><link href='https://fonts.googleapis.com/css?family=Inconsolata|Lora' rel='stylesheet'><link rel='stylesheet' type='text/css' href='../fonts/fonts.css'><link rel='stylesheet' type='text/css' href='../css/lib/wing.min.css'><link rel='stylesheet' type='text/css' href='../css/post.css'><link rel='stylesheet' type='text/css' href='../css/post-math.css'><script>!function(e,a,t,n,g,c,o){e.GoogleAnalyticsObject=g,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),o=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",o.parentNode.insertBefore(c,o)}(window,document,"script",0,"ga"),ga("create","UA-70792533-7","auto"),ga("send","pageview")</script></head><body><div class='container'><a href='../' id='back'><svg width='37' height='24' viewBox='0 0 37 24' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><title>Arrow</title><path id='back-arrow' d='M36.0607 1.06066c.5857-.585786.5857-1.535534 0-2.12132l-9.546-9.54594c-.5858-.5858-1.5355-.5858-2.1213 0-.5858.5858-.5858 1.53553 0 2.12132L32.8787 0l-8.4853 8.48528c-.5858.58579-.5858 1.53552 0 2.12132.5858.5858 1.5355.5858 2.1213 0l9.546-9.54594zM0 1.5h35v-3H0v3z' transform='rotate(180 18.5 6)' fill='#888'></path></svg></a><h1 class='post-title'>Inside Wade</h1><h4 class='post-date'>July 16, 2017</h4><div class='post-content'><p><a href='https://github.com/KingPixil/wade'>Wade</a> is a 1kb Javascript search library. It allows you to search for a query through a set of documents. This query is processed, split into keywords, and then searched within an index structure.</p><h3 id='api'>API</h3><p>The API is extremely minimal and self-explanatory. It looks like:</p><pre><code class='lang-js'>const search = Wade([&quot;He saves on socks.&quot;, &quot;You are being silly.&quot;]);
search(&quot;save socks&quot;);
</code></pre><h3 id='processor'>Processor</h3><p>Wade processes all documents and queries. This works by moving each item through a separate processing function. These do the following operations:</p><ul><li>Make everything lowercase. This helps with searching. All queries and data are made lowercase, resulting in the search not being case-sensitive.</li><li>Remove punctuation. Punctuation is usually irrelevant to the search query and does not need to be searched for.</li><li>Remove stop words. Wade has a list of stop words that are removed from all data and queries. Stop words are extra words that have little meaning or can apply to any item in the data, and removing them allows for more relevant results to be returned. These can be configured through <code>Wade.config.stopWords</code>.</li></ul><h3 id='index'>Index</h3><p>After processing the data, an index can be generated to allow for optimized searches within a text. This index can be generated by:</p><ol><li>Processing each document.</li><li>Splitting each document into a multiset of terms.</li><li>Generating a trie of the terms and storing the indexes of the corresponding documents containing the term.</li><li>Storing the weighted significance of the term in the documents.</li></ol><p>A <em>set</em> is used to store multiple unique items. The <em>cardinality</em> of a set represents the amount of elements in the set.</p><p>On the other hand, a <em>multiset</em> is used to store multiple items (including duplicates). The <em>multiplicity</em> of an item in a multiset is the number of instances of that item in the multiset.</p><h4 id='significance'>Significance</h4><p>Wade uses a special function to find how significant a term is to the data. This function takes in many factors, including the length of the documents, the length of a specific document with the term, and the number of occurrences of the term.</p><p>The significance of the term <em>t</em> in the set of documents <em>d</em> can be represented by the function:</p><span class='mjx-chtml MJXc-display post-math' style='text-align: center'><span class='mjx-math' aria-label='wm(t, d) = 1.5 - \frac{\sum_{i=0}^{|d|} [\frac{\mu(t)}{\sum_{p \in d_i}(\mu(p))}]}{|d|}
'><span class='mjx-mrow' aria-hidden='true'><span class='mjx-mi'><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.225em; padding-bottom: 0.298em'>w</span></span><span class='mjx-mi'><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.225em; padding-bottom: 0.298em'>m</span></span><span class='mjx-mo'><span class='mjx-char MJXc-TeX-main-R' style='padding-top: 0.446em; padding-bottom: 0.593em'>(</span></span><span class='mjx-mi'><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.372em; padding-bottom: 0.298em'>t</span></span><span class='mjx-mo'><span class='mjx-char MJXc-TeX-main-R' style='margin-top: -0.144em; padding-bottom: 0.519em'>,</span></span><span class='mjx-mi MJXc-space1'><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.003em'>d</span></span><span class='mjx-mo'><span class='mjx-char MJXc-TeX-main-R' style='padding-top: 0.446em; padding-bottom: 0.593em'>)</span></span><span class='mjx-mo MJXc-space3'><span class='mjx-char MJXc-TeX-main-R' style='padding-top: 0.077em; padding-bottom: 0.298em'>=</span></span><span class='mjx-mn MJXc-space3'><span class='mjx-char MJXc-TeX-main-R' style='padding-top: 0.372em; padding-bottom: 0.372em'>1.5</span></span><span class='mjx-mo MJXc-space2'><span class='mjx-char MJXc-TeX-main-R' style='padding-top: 0.298em; padding-bottom: 0.446em'>−</span></span><span class='mjx-mfrac MJXc-space2'><span class='mjx-box MJXc-stacked' style='width: 7.264em; padding: 0px 0.12em'><span class='mjx-numerator' style='width: 7.264em; top: -2.7em'><span class='mjx-mrow'><span class='mjx-munderover'><span class='mjx-base'><span class='mjx-mo'><span class='mjx-char MJXc-TeX-size1-R' style='padding-top: 0.519em; padding-bottom: 0.519em'>∑</span></span></span><span class='mjx-stack' style='vertical-align: -0.315em'><span class='mjx-sup' style='font-size: 70.7%; padding-bottom: 0.255em; padding-left: 0px; padding-right: 0.071em'><span class='mjx-texatom' style=''><span class='mjx-mrow'><span class='mjx-texatom'><span class='mjx-mrow'><span class='mjx-mo'><span class='mjx-char MJXc-TeX-main-R' style='padding-top: 0.446em; padding-bottom: 0.593em'>|</span></span></span></span><span class='mjx-mi'><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.003em'>d</span></span><span class='mjx-texatom'><span class='mjx-mrow'><span class='mjx-mo'><span class='mjx-char MJXc-TeX-main-R' style='padding-top: 0.446em; padding-bottom: 0.593em'>|</span></span></span></span></span></span></span><span class='mjx-sub' style='font-size: 70.7%; padding-right: 0.071em'><span class='mjx-texatom' style=''><span class='mjx-mrow'><span class='mjx-mi'><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.446em; padding-bottom: 0.298em'>i</span></span><span class='mjx-mo'><span class='mjx-char MJXc-TeX-main-R' style='padding-top: 0.077em; padding-bottom: 0.298em'>=</span></span><span class='mjx-mn'><span class='mjx-char MJXc-TeX-main-R' style='padding-top: 0.372em; padding-bottom: 0.372em'>0</span></span></span></span></span></span></span><span class='mjx-mo'><span class='mjx-char MJXc-TeX-main-R' style='padding-top: 0.446em; padding-bottom: 0.593em'>[</span></span><span class='mjx-mfrac'><span class='mjx-box MJXc-stacked' style='width: 4.029em; padding: 0px 0.12em'><span class='mjx-numerator' style='font-size: 70.7%; width: 5.697em; top: -1.706em'><span class='mjx-mrow' style=''><span class='mjx-mi'><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.225em; padding-bottom: 0.519em'>μ</span></span><span class='mjx-mo'><span class='mjx-char MJXc-TeX-main-R' style='padding-top: 0.446em; padding-bottom: 0.593em'>(</span></span><span class='mjx-mi'><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.372em; padding-bottom: 0.298em'>t</span></span><span class='mjx-mo'><span class='mjx-char MJXc-TeX-main-R' style='padding-top: 0.446em; padding-bottom: 0.593em'>)</span></span></span></span><span class='mjx-denominator' style='font-size: 70.7%; width: 5.697em; bottom: -1.348em'><span class='mjx-mrow' style=''><span class='mjx-munderover'><span class='mjx-base'><span class='mjx-mo'><span class='mjx-char MJXc-TeX-size1-R' style='padding-top: 0.519em; padding-bottom: 0.519em'>∑</span></span></span><span class='mjx-sub' style='font-size: 83.3%; vertical-align: -0.38em; padding-right: 0.06em'><span class='mjx-texatom' style=''><span class='mjx-mrow'><span class='mjx-mi'><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.225em; padding-bottom: 0.446em'>p</span></span><span class='mjx-mo'><span class='mjx-char MJXc-TeX-main-R' style='padding-top: 0.225em; padding-bottom: 0.372em'>∈</span></span><span class='mjx-msubsup'><span class='mjx-base' style='margin-right: -0.003em'><span class='mjx-mi'><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.003em'>d</span></span></span><span class='mjx-sub' style='vertical-align: -0.332em; padding-right: 0.05em'><span class='mjx-mi'><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.446em; padding-bottom: 0.298em'>i</span></span></span></span></span></span></span></span><span class='mjx-mo'><span class='mjx-char MJXc-TeX-main-R' style='padding-top: 0.446em; padding-bottom: 0.593em'>(</span></span><span class='mjx-mi'><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.225em; padding-bottom: 0.519em'>μ</span></span><span class='mjx-mo'><span class='mjx-char MJXc-TeX-main-R' style='padding-top: 0.446em; padding-bottom: 0.593em'>(</span></span><span class='mjx-mi'><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.225em; padding-bottom: 0.446em'>p</span></span><span class='mjx-mo'><span class='mjx-char MJXc-TeX-main-R' style='padding-top: 0.446em; padding-bottom: 0.593em'>)</span></span><span class='mjx-mo'><span class='mjx-char MJXc-TeX-main-R' style='padding-top: 0.446em; padding-bottom: 0.593em'>)</span></span></span></span><span style='border-bottom: 1.3px solid; top: -0.296em; width: 4.029em' class='mjx-line'></span></span><span style='height: 2.16em; vertical-align: -0.953em' class='mjx-vsize'></span></span><span class='mjx-mo'><span class='mjx-char MJXc-TeX-main-R' style='padding-top: 0.446em; padding-bottom: 0.593em'>]</span></span></span></span><span class='mjx-denominator' style='width: 7.264em; bottom: -1.089em'><span class='mjx-mrow'><span class='mjx-texatom'><span class='mjx-mrow'><span class='mjx-mo'><span class='mjx-char MJXc-TeX-main-R' style='padding-top: 0.446em; padding-bottom: 0.593em'>|</span></span></span></span><span class='mjx-mi'><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.003em'>d</span></span><span class='mjx-texatom'><span class='mjx-mrow'><span class='mjx-mo'><span class='mjx-char MJXc-TeX-main-R' style='padding-top: 0.446em; padding-bottom: 0.593em'>|</span></span></span></span></span></span><span style='border-bottom: 1.3px solid; top: -0.296em; width: 7.264em' class='mjx-line'></span></span><span style='height: 3.789em; vertical-align: -1.089em' class='mjx-vsize'></span></span></span></span></span><ol><li><span class='mjx-chtml post-math-inline' style='text-align: center'><span class='mjx-math' aria-label='f'><span class='mjx-mrow' aria-hidden='true'><span class='mjx-mi'><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em'>f</span></span></span></span></span> is a set of multisets <span class='mjx-chtml post-math-inline' style='text-align: center'><span class='mjx-math' aria-label='d_i'><span class='mjx-mrow' aria-hidden='true'><span class='mjx-msubsup'><span class='mjx-base' style='margin-right: -0.003em'><span class='mjx-mi'><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.003em'>d</span></span></span><span class='mjx-sub' style='font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em'><span class='mjx-mi' style=''><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.446em; padding-bottom: 0.298em'>i</span></span></span></span></span></span></span></li><li><span class='mjx-chtml post-math-inline' style='text-align: center'><span class='mjx-math' aria-label='t \in d_i'><span class='mjx-mrow' aria-hidden='true'><span class='mjx-mi'><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.372em; padding-bottom: 0.298em'>t</span></span><span class='mjx-mo MJXc-space3'><span class='mjx-char MJXc-TeX-main-R' style='padding-top: 0.225em; padding-bottom: 0.372em'>∈</span></span><span class='mjx-msubsup MJXc-space3'><span class='mjx-base' style='margin-right: -0.003em'><span class='mjx-mi'><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.003em'>d</span></span></span><span class='mjx-sub' style='font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em'><span class='mjx-mi' style=''><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.446em; padding-bottom: 0.298em'>i</span></span></span></span></span></span></span> for at least one <span class='mjx-chtml post-math-inline' style='text-align: center'><span class='mjx-math' aria-label='d_i'><span class='mjx-mrow' aria-hidden='true'><span class='mjx-msubsup'><span class='mjx-base' style='margin-right: -0.003em'><span class='mjx-mi'><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.003em'>d</span></span></span><span class='mjx-sub' style='font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em'><span class='mjx-mi' style=''><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.446em; padding-bottom: 0.298em'>i</span></span></span></span></span></span></span></li><li><span class='mjx-chtml post-math-inline' style='text-align: center'><span class='mjx-math' aria-label='\mu(t)'><span class='mjx-mrow' aria-hidden='true'><span class='mjx-mi'><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.225em; padding-bottom: 0.519em'>μ</span></span><span class='mjx-mo'><span class='mjx-char MJXc-TeX-main-R' style='padding-top: 0.446em; padding-bottom: 0.593em'>(</span></span><span class='mjx-mi'><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.372em; padding-bottom: 0.298em'>t</span></span><span class='mjx-mo'><span class='mjx-char MJXc-TeX-main-R' style='padding-top: 0.446em; padding-bottom: 0.593em'>)</span></span></span></span></span> is the multiplicity of <span class='mjx-chtml post-math-inline' style='text-align: center'><span class='mjx-math' aria-label='t'><span class='mjx-mrow' aria-hidden='true'><span class='mjx-mi'><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.372em; padding-bottom: 0.298em'>t</span></span></span></span></span> in the multiset <span class='mjx-chtml post-math-inline' style='text-align: center'><span class='mjx-math' aria-label='d_i'><span class='mjx-mrow' aria-hidden='true'><span class='mjx-msubsup'><span class='mjx-base' style='margin-right: -0.003em'><span class='mjx-mi'><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.003em'>d</span></span></span><span class='mjx-sub' style='font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em'><span class='mjx-mi' style=''><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.446em; padding-bottom: 0.298em'>i</span></span></span></span></span></span></span></li><li><span class='mjx-chtml post-math-inline' style='text-align: center'><span class='mjx-math' aria-label='\sum_{p \in d_i}(\mu(p))'><span class='mjx-mrow' aria-hidden='true'><span class='mjx-munderover'><span class='mjx-itable'><span class='mjx-row'><span class='mjx-cell'><span class='mjx-op'><span class='mjx-mo'><span class='mjx-char MJXc-TeX-size2-R' style='padding-top: 0.74em; padding-bottom: 0.74em'>∑</span></span></span></span></span><span class='mjx-row'><span class='mjx-under' style='font-size: 70.7%; padding-top: 0.236em; padding-bottom: 0.141em; padding-left: 0.011em'><span class='mjx-texatom' style=''><span class='mjx-mrow'><span class='mjx-mi'><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.225em; padding-bottom: 0.446em'>p</span></span><span class='mjx-mo'><span class='mjx-char MJXc-TeX-main-R' style='padding-top: 0.225em; padding-bottom: 0.372em'>∈</span></span><span class='mjx-msubsup'><span class='mjx-base' style='margin-right: -0.003em'><span class='mjx-mi'><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.003em'>d</span></span></span><span class='mjx-sub' style='font-size: 83.3%; vertical-align: -0.262em; padding-right: 0.06em'><span class='mjx-mi' style=''><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.446em; padding-bottom: 0.298em'>i</span></span></span></span></span></span></span></span></span></span><span class='mjx-mo'><span class='mjx-char MJXc-TeX-main-R' style='padding-top: 0.446em; padding-bottom: 0.593em'>(</span></span><span class='mjx-mi'><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.225em; padding-bottom: 0.519em'>μ</span></span><span class='mjx-mo'><span class='mjx-char MJXc-TeX-main-R' style='padding-top: 0.446em; padding-bottom: 0.593em'>(</span></span><span class='mjx-mi'><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.225em; padding-bottom: 0.446em'>p</span></span><span class='mjx-mo'><span class='mjx-char MJXc-TeX-main-R' style='padding-top: 0.446em; padding-bottom: 0.593em'>)</span></span><span class='mjx-mo'><span class='mjx-char MJXc-TeX-main-R' style='padding-top: 0.446em; padding-bottom: 0.593em'>)</span></span></span></span></span> is the cardinality of the multiset <span class='mjx-chtml post-math-inline' style='text-align: center'><span class='mjx-math' aria-label='d_i'><span class='mjx-mrow' aria-hidden='true'><span class='mjx-msubsup'><span class='mjx-base' style='margin-right: -0.003em'><span class='mjx-mi'><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.003em'>d</span></span></span><span class='mjx-sub' style='font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em'><span class='mjx-mi' style=''><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.446em; padding-bottom: 0.298em'>i</span></span></span></span></span></span></span></li><li><span class='mjx-chtml post-math-inline' style='text-align: center'><span class='mjx-math' aria-label='\frac{\mu(t)}{\sum_{p \in d_i}(\mu(p))}'><span class='mjx-mrow' aria-hidden='true'><span class='mjx-mfrac'><span class='mjx-box MJXc-stacked' style='width: 5.381em; padding: 0px 0.12em'><span class='mjx-numerator' style='width: 5.381em; top: -1.59em'><span class='mjx-mrow'><span class='mjx-mi'><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.225em; padding-bottom: 0.519em'>μ</span></span><span class='mjx-mo'><span class='mjx-char MJXc-TeX-main-R' style='padding-top: 0.446em; padding-bottom: 0.593em'>(</span></span><span class='mjx-mi'><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.372em; padding-bottom: 0.298em'>t</span></span><span class='mjx-mo'><span class='mjx-char MJXc-TeX-main-R' style='padding-top: 0.446em; padding-bottom: 0.593em'>)</span></span></span></span><span class='mjx-denominator' style='width: 5.381em; bottom: -1.301em'><span class='mjx-mrow'><span class='mjx-munderover'><span class='mjx-base'><span class='mjx-mo'><span class='mjx-char MJXc-TeX-size1-R' style='padding-top: 0.519em; padding-bottom: 0.519em'>∑</span></span></span><span class='mjx-sub' style='font-size: 70.7%; vertical-align: -0.439em; padding-right: 0.071em'><span class='mjx-texatom' style=''><span class='mjx-mrow'><span class='mjx-mi'><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.225em; padding-bottom: 0.446em'>p</span></span><span class='mjx-mo'><span class='mjx-char MJXc-TeX-main-R' style='padding-top: 0.225em; padding-bottom: 0.372em'>∈</span></span><span class='mjx-msubsup'><span class='mjx-base' style='margin-right: -0.003em'><span class='mjx-mi'><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.003em'>d</span></span></span><span class='mjx-sub' style='font-size: 83.3%; vertical-align: -0.262em; padding-right: 0.06em'><span class='mjx-mi' style=''><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.446em; padding-bottom: 0.298em'>i</span></span></span></span></span></span></span></span><span class='mjx-mo'><span class='mjx-char MJXc-TeX-main-R' style='padding-top: 0.446em; padding-bottom: 0.593em'>(</span></span><span class='mjx-mi'><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.225em; padding-bottom: 0.519em'>μ</span></span><span class='mjx-mo'><span class='mjx-char MJXc-TeX-main-R' style='padding-top: 0.446em; padding-bottom: 0.593em'>(</span></span><span class='mjx-mi'><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.225em; padding-bottom: 0.446em'>p</span></span><span class='mjx-mo'><span class='mjx-char MJXc-TeX-main-R' style='padding-top: 0.446em; padding-bottom: 0.593em'>)</span></span><span class='mjx-mo'><span class='mjx-char MJXc-TeX-main-R' style='padding-top: 0.446em; padding-bottom: 0.593em'>)</span></span></span></span><span style='border-bottom: 1.3px solid; top: -0.296em; width: 5.381em' class='mjx-line'></span></span><span style='height: 2.891em; vertical-align: -1.301em' class='mjx-vsize'></span></span></span></span></span> is the ratio of occurrences of the term <span class='mjx-chtml post-math-inline' style='text-align: center'><span class='mjx-math' aria-label='t'><span class='mjx-mrow' aria-hidden='true'><span class='mjx-mi'><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.372em; padding-bottom: 0.298em'>t</span></span></span></span></span> in the document <span class='mjx-chtml post-math-inline' style='text-align: center'><span class='mjx-math' aria-label='d_i'><span class='mjx-mrow' aria-hidden='true'><span class='mjx-msubsup'><span class='mjx-base' style='margin-right: -0.003em'><span class='mjx-mi'><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.003em'>d</span></span></span><span class='mjx-sub' style='font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em'><span class='mjx-mi' style=''><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.446em; padding-bottom: 0.298em'>i</span></span></span></span></span></span></span> to the total amount of terms in the document <span class='mjx-chtml post-math-inline' style='text-align: center'><span class='mjx-math' aria-label='d_i'><span class='mjx-mrow' aria-hidden='true'><span class='mjx-msubsup'><span class='mjx-base' style='margin-right: -0.003em'><span class='mjx-mi'><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.003em'>d</span></span></span><span class='mjx-sub' style='font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em'><span class='mjx-mi' style=''><span class='mjx-char MJXc-TeX-math-I' style='padding-top: 0.446em; padding-bottom: 0.298em'>i</span></span></span></span></span></span></span></li></ol><p>This works by finding the average of how often the term appears within a document. After this, the significance is normalized between <span class='mjx-chtml post-math-inline' style='text-align: center'><span class='mjx-math' aria-label='0.5'><span class='mjx-mrow' aria-hidden='true'><span class='mjx-mn'><span class='mjx-char MJXc-TeX-main-R' style='padding-top: 0.372em; padding-bottom: 0.372em'>0.5</span></span></span></span></span> and <span class='mjx-chtml post-math-inline' style='text-align: center'><span class='mjx-math' aria-label='1.5'><span class='mjx-mrow' aria-hidden='true'><span class='mjx-mn'><span class='mjx-char MJXc-TeX-main-R' style='padding-top: 0.372em; padding-bottom: 0.372em'>1.5</span></span></span></span></span>, allowing it to become higher when the average occurrence is lower. This allows for rarer terms to be amplified in significance.</p><h3 id='search'>Search</h3><p>When you first give Wade an array of data, it will create a <a href='https://en.wikipedia.org/wiki/Trie'>trie</a> representing all indexes of the data.</p><p>The best way to understand how this works is to use an example. Say that the data given looks like:</p><pre><code class='lang-js'>[&quot;Hey&quot;, &quot;Hello&quot;, &quot;Greetings&quot;]
</code></pre><p>After preprocessing, the data will look like:</p><pre><code class='lang-js'>[&quot;hey&quot;, &quot;hello&quot;, &quot;greetings&quot;]
</code></pre><p>The generated trie for this will have an array holding the indexes the of items that have the keyword.</p><pre><code class='lang-js'>{
  &quot;h&quot;: {
    &quot;e&quot;: {
      &quot;y&quot;: {
        &quot;indexes&quot;: [0]
      },
      &quot;l&quot;: {
        &quot;l&quot;: {
          &quot;o&quot;: {
            &quot;indexes&quot;: [1]
          }
        }
      }
    }
  },
  &quot;g&quot;: {
    &quot;r&quot;: {
      &quot;e&quot;: {
        &quot;e&quot;: {
          &quot;t&quot;: {
            &quot;i&quot;: {
              &quot;n&quot;: {
                &quot;g&quot;: {
                  &quot;s&quot;: {
                    &quot;indexes&quot;: [2]
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
</code></pre><p>As you can see, the trie will make a single data structure representing all of the strings. Whenever a node has had the content of a string so far, it will contain an <code>indexes</code> property holding the indexes in the data that the node refers to.</p><p>This data structure can take some time to generate, but searching through it is a breeze.</p><p>Say we would like to search for <code>&quot;he&quot;</code>. Wade will split this into keywords, and search for each of them in the trie individually, updating the score for the indexes as it goes.</p><p>Since there is only one keyword, Wade will treat it <strong>as a prefix</strong>, meaning that it will perform a <a href='https://en.wikipedia.org/wiki/Depth-first_search'>depth-first search</a>.</p><p>This works by traveling as far down the trie as possible, and then grabbing the index of itself and <em>every</em> node under it.</p><p>Let&#39;s go through this step by step. Wade will go through the keyword one by one, and see if it is in the trie.</p><ol><li>The current character is <code>&quot;h&quot;</code>, it is inside of the trie, set the current node to it and continue.</li><li>The current character is <code>&quot;e&quot;</code>, set the current node to it.</li><li>We have arrived at the end of the keyword, check all nodes below.</li><li>Check <code>&quot;y&quot;</code>. The node has an <code>indexes</code> property, increment the score for the index inside (<code>[0]</code>).</li><li>Traverse through <code>&quot;e&quot;</code>, <code>&quot;l&quot;</code>, <code>&quot;l&quot;</code>, and <code>&quot;o&quot;</code>. The node has an <code>indexes</code> property, increment the score for the index inside (<code>[1]</code>).</li><li>Nothing left, abort the search.</li></ol><p>In the end, we will be left with a <code>results</code> array like:</p><pre><code class='lang-js'>[1, 1]
</code></pre><p>Both items have a score of <code>1</code>, hence the value of each item in the results array being <code>1</code>. The index of the item corresponds to the index in the data. Index <code>0</code> in the data (<code>&quot;Hey&quot;</code>) has a score of <code>1</code>, and index <code>1</code> in the data (<code>&quot;Hello&quot;</code>), has a score of <code>1</code>.</p><p>We can see that we have returned the results for:</p><pre><code class='lang-js'>[&quot;Hey&quot;, &quot;Hello&quot;]
</code></pre><p>These both do indeed have the prefix of <code>&quot;he&quot;</code>, which means we have successfully performed a search! For keyword that aren&#39;t treated as prefixes, Wade will not perform a depth-first search, and will increment the score for any indexes found if the whole keyword was matched. The last keyword of a query will be treated as a prefix, as the user might still be typing.</p><h3 id='conclusion'>Conclusion</h3><p>That is how Wade works! In a nutshell, it preprocesses data, splits it into keywords, and searches within a trie.</p><p>Be sure to check out the source on <a href='https://github.com/KingPixil/wade'>Github</a></p></div></div><script type='text/javascript' src='../js/scripts.js'></script></body></html>